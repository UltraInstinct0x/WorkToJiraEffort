<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkToJiraEffort</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>WorkToJiraEffort</h1>
            <p class="subtitle">Automatic Time Tracking</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Current Status Card -->
            <div class="card status-card">
                <div class="card-header">
                    <h2>Current Status</h2>
                    <button class="btn-refresh" id="refreshBtn" title="Refresh">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M13.5 3.5C12.25 2.25 10.5 1.5 8.5 1.5C4.75 1.5 1.75 4.5 1.75 8.25C1.75 12 4.75 15 8.5 15C11.5 15 14 12.75 14.5 9.75H13C12.5 11.75 10.75 13.25 8.5 13.25C5.75 13.25 3.5 11 3.5 8.25C3.5 5.5 5.75 3.25 8.5 3.25C9.75 3.25 11 3.75 11.75 4.75L9.5 7H14.5V2L13.5 3.5Z" fill="currentColor"/>
                        </svg>
                    </button>
                </div>
                <div class="status-info">
                    <div class="status-item">
                        <span class="status-label">Current Issue:</span>
                        <span class="status-value" id="currentIssue">-</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Status:</span>
                        <span class="status-badge" id="trackingStatus">Not Tracking</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Today's Total:</span>
                        <span class="status-value" id="totalTime">0h 0m</span>
                    </div>
                </div>
            </div>

            <!-- Issue Selection Card -->
            <div class="card">
                <div class="card-header">
                    <h2>Set Active Issue</h2>
                </div>
                <div class="issue-input-group">
                    <input
                        type="text"
                        id="issueInput"
                        class="issue-input"
                        placeholder="e.g., PROJ-123"
                        maxlength="50"
                    />
                    <button class="btn btn-primary" id="setIssueBtn">Set</button>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <p class="quick-actions-label">Quick Select:</p>
                    <div class="quick-actions-buttons">
                        <button class="btn btn-secondary btn-sm" data-issue="PROJ-123">PROJ-123</button>
                        <button class="btn btn-secondary btn-sm" data-issue="PROJ-456">PROJ-456</button>
                        <button class="btn btn-secondary btn-sm" data-issue="PROJ-789">PROJ-789</button>
                    </div>
                </div>

                <button class="btn btn-danger" id="clearIssueBtn">Clear Override</button>
            </div>

            <!-- Export Card -->
            <div class="card">
                <div class="card-header">
                    <h2>Export Data</h2>
                </div>
                <p class="export-description">Export your tracked activities from the current session</p>
                <div class="export-buttons">
                    <button class="btn btn-accent" id="exportCsvBtn">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-right: 6px; vertical-align: text-bottom;">
                            <path d="M8 11L4 7H7V3H9V7H12L8 11Z" fill="currentColor"/>
                            <path d="M13 12V13H3V12H2V13C2 13.55 2.45 14 3 14H13C13.55 14 14 13.55 14 13V12H13Z" fill="currentColor"/>
                        </svg>
                        Export as CSV
                    </button>
                    <button class="btn btn-accent" id="exportJsonBtn">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-right: 6px; vertical-align: text-bottom;">
                            <path d="M8 11L4 7H7V3H9V7H12L8 11Z" fill="currentColor"/>
                            <path d="M13 12V13H3V12H2V13C2 13.55 2.45 14 3 14H13C13.55 14 14 13.55 14 13V12H13Z" fill="currentColor"/>
                        </svg>
                        Export as JSON
                    </button>
                </div>
            </div>

            <!-- Info Card -->
            <div class="card info-card">
                <p class="info-text">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="vertical-align: text-bottom;">
                        <path d="M8 1.5C4.41 1.5 1.5 4.41 1.5 8C1.5 11.59 4.41 14.5 8 14.5C11.59 14.5 14.5 11.59 14.5 8C14.5 4.41 11.59 1.5 8 1.5ZM8.75 11.25H7.25V7.25H8.75V11.25ZM8.75 5.75H7.25V4.25H8.75V5.75Z" fill="currentColor"/>
                    </svg>
                    Time tracking runs in the background via Screenpipe. Set an issue to override automatic detection.
                </p>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Daemon: <span id="daemonStatus" class="daemon-status">Checking...</span></p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
